----------------------------------------------------------------------
                              babel
ES6 לקוד ES5 קיים כלי אוטומטי שיודע לתרגם כל קוד 

https://babeljs.io/repl

----------------------------------------------------------------------
                        Webpack install
1.) all JS files save inside src folder near index.html </br>

2.)</br>
npm init -y</br>
npm i webpack --save-dev</br>
npm i webpack-cli --save-dev</br>
npm i babel-core babel-loader babel-preset-env --save-dev</br>
npm install --save-dev @babel/core</br>
</br>
create new file 'webpack.config.js' near index.html with->:</br>
module.exports = {</br>
  module: {</br>
    rules: [</br>
      {</br>
        test: /\.js$/,</br>
        exclude: /node_modules/,</br>
        use: {</br>
          loader: "babel-loader"</br>
        }</br>
      }</br>
    ]</br>
  }</br>
};</br>

npx webpack --mode development / production


----------------------------------------------------------------------
                        const , let and freeze

var מוכר בכל הפונקציה - לא משנה באיזה בלוק הוגדר</br>
for (var i=0; i < 10; i++) {</br>
    // do stuff</br>
}</br>
console.log(i);</br>

const , let - מוכרים רק באותו הבלוק בהם הוגדרו

const - קבוע</br>
:הדוגמא הבאה אינה חוקית</br>
const name = 'ynon';</br>
name = 10;</br>

let - ניתן לשינוי</br>
:ההדפסה השניה אינה חוקית</br>
for (let i=0; i < 10; i++) {</br>
  console.log(i);</br>
}</br>
console.log(i);</br>

ERROR->:</br>
let x = 10;</br>
{</br>
  console.log(x); //לא נתפס ReferenceError: אין אפשרות לגשת ל- 'x' לפני האתחול</br>
  let x = 5;</br>
  console.log(x);</br>
}</br>
console.log(x);</br>



console.log print:  10, 5 , 10 ->:</br>
let x = 10;</br>
console.log(x);</br>
{</br>
  let x = 5;</br>
  console.log(x);</br>
}</br>
console.log(x);</br>

const a = Object.freeze([10, 20]);</br>
a.push(30);// ERROR - because freeze</br>

----------------------------------------------------------------------
                     arrow functions
const f = (x) => x * x;
// is the same as:
const ff = function(x) { return x * x; };

setTimeout(() => {</br>
    console.log(this.name);</br>
}, 500);
// is the same as:
setTimeout(function() {</br>
    console.log(this.name);</br>
}.bind(this), 500);</br>

----------------------------------------------------------------------
                          class and extends

class AutoBind {</br>
    constructor() {</br>
        this.autoBindMethods();</br>
      }</br>
    
      getMethods() {
        const childClassPrototype = this.constructor.prototype;
        return Object.getOwnPropertyNames(childClassPrototype).filter(item => item !== 'constructor');
      }
    
      autoBindMethods() {
        this.getMethods().forEach(methodName => {
          this[methodName] = this[methodName].bind(this);
        });
      }
}

class Counter extends AutoBind {</br>
    constructor(btn) {</br>
      super();</br>
      this.btn = btn;</br>
      this.btn.textContent = '0';</br>
      btn.addEventListener('click', this.inc);</br>
    }</br>
    
    inc() {
      this.btn.textContent++;
    }
  }
  
  const c = new Counter(document.querySelector('button'));

  --------------------------------------------------------------------
          GET , SET and functions create and return classes
  1.) Getters and Setters:

      class Timer {
        constructor() {
            this.seconds = 0;
        }

        set minutes(val) {
            this.seconds = val * 60;
        }

        set hours(val) {
            this.seconds = val * 3600;
        }

        get minutes() {
            return this.seconds / 60;
        }

        get hours() {
            return this.seconds / 3600;
        }
    }


  2.) Dinamic fields.

      class Timer {
          constructor() {
              this.seconds = 0;
          }
      }

      [['hours', 3600], ['minutes', 60]].forEach(function(prop) {
          const [propName, propFactor] = prop;
          Object.defineProperty(Timer.prototype, propName, {
              get() {
                  return this.seconds / propFactor;
              },
              set(val) {
                  this.seconds = val * propFactor;
              }
          }) 
      });



 3.)  functions creates classes 

      function makeTimerClass(factors) {
        const Timer = class {
            constructor() {
                this.seconds = 0;
            }
        };

        Timer.prototype.newFunction = function() {

        }

        factors.forEach(function(prop) {
            const [propName, propFactor] = prop;
            Object.defineProperty(Timer.prototype, propName, {
                get() {
                    return this.seconds / propFactor;
                },
                set(val) {
                    this.seconds = val * propFactor;
                }
            })    
        });   
        return Timer;
    }


    const Timer = makeTimerClass([['hours', 3600], ['minutes', 60]]);
    const SmallTimer = makeTimerClass([['ms', 1/1000]]);

    const t = new Timer();
    const st = new SmallTimer();

----------------------------------------------------------------------
1.) Default values instead of arguments.

    function printTimes(text , times = 5) {
        for(let i = 0 ; i< times ; i++) {
            console.log(text);
        }
    }
    printTimes('hello');
    printTimes('hello' , 3);


2.) ...  מכניס למערך איברים בודדים בתוך הפונקציה או מפרק מערך לאיברים בודדים בקריאה לפונקציה</br>
function longetThan(minLength , ...words) {</br>
    return words.filter(w=>w.length>minLength);</br>
}</br>

longetThan(4 , 'aaaaa', 'ggg' , 'fffff' , 'jjjj');</br>
longetThan(4 , ...['aaaaa', 'ggg' , 'fffff' , 'jjjj']);</br>

----------------------------------------------------------------------
                          for of and generators
const arr = [10 ,20 , 30, 40 , 60 , 50];</br>
1.) for index:</br>
    let results = 0;</br>
    for(let i=0; i< arr.length ; i++) {</br>
        results+=arr[i];</br>
    }</br>
    console.log(results);</br>

2.) forEach with callback</br>
    let results2 = 0;</br>
    arr.forEach((val , index)=>{</br>
        results2+=val;</br>
    });</br>
    console.log(results2);</br>

3.) for of:</br>
    a.) let results3 = 0;</br>
        for(let num of arr) {</br>
            results3+=num;</br>
        }</br>
        console.log(results3);</br>

    b.) const divs = document.querySelectorAll('div')
        for(div of divs) {
            div.textContent = 'Ouch!';
        }

    c.) Generators: someNumbers returns a suspended calculation (someNumbers{<suspended>})
        function *someNumbers() {
            yield 10;
            yield 20;
            yield 30;
            for(let i =0; i<2; i++) {
                yield 5;
            }
            yield 70;
        }

        for(let num of someNumbers()) {
            console.log(num);
        }

        g = someNumbers();
        g.next()
        //{value: 10, done: false}
        g.next()
        //{value: 20, done: false}
        g.next()
        //{value: 30, done: false}
        g.next()
        //{value: 5, done: false}
        g.next()
        //{value: 5, done: false}
        g.next()
        //{value: 70, done: false}
        g.next()
        //{value: undefined, done: true}
        g.next()
        //{value: undefined, done: true}

----------------------------------------------------------------------
                            Symbols
1.) :מקבלת מחרוזת ויוצרת ממנה סימבול חדש, כמה דוגמאות Symbol הפונקציה </br>
    const x = Symbol('foo');</br>
    const y = Symbol('foo');</br>
    const z = Symbol('bar');</br>
    x === y; //false : Each call to Symbol returns a new symbol object</br>
    x.toString() === y.toString() //true: symbol.toString returns a string representation of the symbol results = "Symbol(foo)"</br>
    x.toString() === z.toString() //false: z.toString() is "Symbol(bar)"</br>

2.) :מקבלת מחרוזת ושולפת את הסימבול המתאים לה מהטבלא (אם לא קיים יוצרת חדש ומוסיפה לטבלא). כמה דוגמאות Symbol.for הפונקציה </br>
    const x = Symbol.for('foo')</br>
    const y = Symbol.for('foo')</br>
    const z = Symbol.for('bar')</br>
    x === y // true: both refer to the same symbol</br>
    x === z // false</br>

:דוגמאות ל-2 סימבולים הקיימים כבר מובנים בשפה</br>
1.) דוגמא ל-2 הסימבולים</br>
    class MyStuff {</br>
        [Symbol.toPrimitive] (hint) </br>{
            if(hint === 'number') {</br>
                return 4;</br>
            } else if(hint === 'string'){</br>
                return 'stuff programmers have';</br>
            } else {</br>
                return 7;</br></br>
            }
        }</br>
        *[Symbol.iterator]() {</br>
            yield 'coffee';</br>
            yield 'laptop';</br>
            yield 'keyboard';</br>
            yield 'cool hat';</br>
        }</br>
    }</br>

    a.) Symbol.iterator
        const stuff = new MyStuff();
        for(let item of stuff) {
            console.log(item);
        }
    b.) Symbol.toPrimitive
        stuff - 1          // results: 3
        stuff+'hello'      // results: "7hello"
        Math.min(5, stuff) // results: 4

2.) עוד דוגמא לסימבול השני</br>
    class Car {</br>
        constructor(speed) {</br>
          this.speed = speed;</br>
        }</br>
</br>
        [Symbol.toPrimitive](hint) {
          if (hint === 'string') {
                return "I am a car driving at " + this.speed + " km/h";
          } else if (hint === 'number') {
                return this.speed;
          } else {
              // JavaScript is not sure if it should use a string or a number
              // so it passes the value "default"
              return this.speed;
          }
        }
    }
    const c1 = new Car(20);
    const c2 = new Car(50);
    alert(c1);                        // alerts: "I am a car driving at 20 km/h";
    console.log(c1 + c2);             // prints: 70 to the console
    const fastest = Math.max(c1, c2); // fastest is now 50
    console.log(fastest);

----------------------------------------------------------------------
                     שיפור בכתיב האובייקטים 

const foo = 10;</br>
const obj = {</br>
  foo,</br>

  [Math.max(2, 5)]: 'hello',</br>

  hello() {</br>
    console.log('hello');</br>
  }</br>
};</br>

----------------------------------------------------------------------
                       שילוב קוד בתוך מחרוזת
const name = 'giti';</br>
const text = `<h1>${name}</h1>`;</br>
document.body.innerHTML = text;</br>

const stuff = ['coffee' , 'leptop' , 'cool hat'];</br>
const list = `</br>
    < ul></br>
        ${stuff.map(el=>`<li>${el}</li>`).join('')}</br>
    < ul></br>
`;</br>
document.body.innerHTML+= list;</br>

----------------------------------------------------------------------
                פירוק והרכבה של מערכים ואובייקטים
1.) מערכים</br>
    const arr = [10 ,20 , 30 , 40 , 50];</br>
    const [first , second , ...rest] = arr;</br>


2.) אובייקטים</br>
    const data = {</br>
        name: 'giti' , </br>
        likes: {</br>
            programing:'JavaScript',</br>
            drinks: 'coffee',</br>
        }</br>
    };</br>

    a.) const {name , likes:{programing ,drinks}} = data;
    
    b.) function printData({name , likes: {programing, drinks}}) {
            //name , programming , drinks
            console.log(`${name} ${programing} ${drinks}`);
        }
        printData(data);
----------------------------------------------------------------------
                            מודולים
 <script src="src/index.js" type="module"></script> </br>
1.) To load class/function that defined with export default need to do: import myName from '/.file.js'; </br>
2.) To load class/function that defined with export only need to do: </br>
    a.) import {exactlyName as myName , exactlyName as myName} from '/.file.js'; </br>
    b.) import * as myName from '/.file.js'; myName.* includes all functions; </br>
3.) To load class/function inside a function need to do: import('./file.js').then(module=>{ module.default/module.exactlyName }); </br>
4.) import {} from "https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"; </br>


1.) :יצוא מחלקה בודדת מקובץ</br>
    export default class Car {</br>
    }</br>

2.) :יבוא מחלקה בודדת מקובץ חיצוני</br>
    import Car from './car.js';</br>


3.) :יצוא מספר פונקציות מקובץ</br>
    export function foo() { }</br>
    export function bar() { }</br>

4.) :יבוא מספר פונקציות מקובץ חיצוני</br>
    import { foo as 'myName', bar as 'myName'} from './utils.js';</br>

5.) :טעינת ספריית צד-שלישי ללא יבוא סמלים</br>
    import {} from 'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js';</br>

6.) :טעינה דינמית</br>
    //for default</br>
    import('./car.js').then(function(module) {</br>
        const Car = module.default;</br>
        const c = new Car(10);</br>
        c.drive();</br>
    });</br>
    
    //for export not default
    import('./utils.js').then(module=>{
         const {lastLetter , firstLetter} = module;
         console.log(firstLetter('giti'));
         console.log(lastLetter('giti'));
    });

----------------------------------------------------------------------
                            Promises
1.)
    const btnStart = document.querySelector('#btn-start');</br>
    const results = document.querySelector('#result');</br>
    btnStart.addEventListener('click',start);</br>
</br>
    function awaitForUserInput() {
        const myPrompt = document.querySelector('#prompt');
        const input = document.querySelector('input');
        const btnGo = document.querySelector('#btn-go');
        results.style.display = 'none';
        myPrompt.style.display = 'block';
        input.value = '';

        return new Promise((resolve , reject)=>{
            btnGo.addEventListener('click',()=>{
                resolve(input.value);
                myPrompt.style.display = 'none';
            });
        });
    }

    function start() {
        awaitForUserInput().then((input)=>{
            results.style.display = 'block';
            results.innerHTML = `Hello ${input}`;
        });
    }

2.)
    function allImagesLoaded() {
        const p = document.querySelector('.loading');
        p.classList.remove('loading');
    }

    const promises = [];
    const images = document.querySelectorAll('img');
    for(let img of images) {
        const p = new Promise((resolve , reject)=>{
            img.addEventListener('load'  , resolve);
            img.addEventListener('error' , reject);
        });
        promises.push(p);
    }

    Promise.all(promises).then(allImagesLoaded).catch(function(e) {
        console.log('error loading image: ' + e.target.src);
    });

----------------------------------------------------------------------
                          async / await

const lat_field = document.querySelector('#lat-field');</br>
const long_field = document.querySelector('#long-field');</br>

async function getLocationAndPrint() {    </br>
    try {</br>
        const data = await $.get('http://api.open-notify.org/iss-now.json');</br>
        const { iss_position: { latitude, longitude  }} = data;</br>
        lat_field.value = latitude;</br>
        long_field.value = longitude;</br>
        setTimeout(getLocationAndPrint, 1000);</br>
    } catch(err) {</br>
        console.log('network error');</br>
    }</br>
}</br>

getLocationAndPrint();</br>

----------------------------------------------------------------------
                         Async Generator
1.) await Promise.all</br>
2.) async iterator: for await(let data of promises) {}</br>
3.) async generator: async function *generator() {yield...}</br>

examples for all:</br>

1.) 
    import {} from 'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js';

    async function getData(id) {
        const data = await $.get(`https://swapi.co/api/people/${id}/`);
        const futureFilms = data.films.map(film => $.get(film));
        const films = await Promise.all(futureFilms);
        for (let film of films) {
            console.log(film.title);
        }
    }

    getData(1);


2.)
    import {} from 'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js';

    async function getData(id) {
        const data = await $.get(`https://swapi.co/api/people/${id}/`);
        const futureFilms = data.films.map(film => $.get(film));
        for await (let film of futureFilms) {
            console.log(film.title);
        }
    }

    getData(1);

3.)
    import {} from 'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js';</br>
    function asleep(ms) {</br>
        return new Promise((resolve, reject) => {</br>
            setTimeout(resolve, ms);</br>
        });</br>
    }</br>

    async function *issLocations() {
        while (true) {
            yield $.get('http://api.open-notify.org/iss-now.json');
            await asleep(60000);
        }    
    }

    async function main() {
        const lat_field = document.querySelector('#lat-field');
        const long_field = document.querySelector('#long-field');

        for await (let data of issLocations()) {
            const { iss_position: { latitude, longitude  }} = data;
            lat_field.value = latitude;
            long_field.value = longitude;
        }
    }
    main();

----------------------------------------------------------------------
                            Maps and Sets
 Array.from את שניהם ניתן להפוך למערך באמצעות הפונקציה

---- Map / WeakMap ---- מפתחות וערכים בדומה לאובייקט רגיל

m = new Map(); / new WeakMap();</br>
m.set(2, 'number two');</br>
m.set('2', 'string two');</br>

// m.size is now 2</br>
m.size;</br>

:הגבלות באובייקט המוחלש</br>
1.) המפתחות חייבים להיות אובייקטים</br>
2.) לדעת את הגודל או בכלל לקבל רשימה של המפתחות ,for אין אפשרות לסרוק את כל המפתחות בלולאת</br>



---- Set / WeakSet ---- רק מפתחות

const mySet = new Set();</br>

mySet.add(1); // Set [ 1 ]</br>
mySet.add(5); // Set [ 1, 5 ]</br>
mySet.add(5); // Set [ 1, 5 ]</br>
mySet.add('some text'); // Set [ 1, 5, 'some text' ]</br>
const o = {a: 1, b: 2};</br>
mySet.add(o);</br>

mySet.add({a: 1, b: 2}); // o is referencing a different object so this is okay</br>

mySet.has(1); // true</br>
mySet.has(3); // false, 3 has not been added to the set</br>
mySet.has(5);              // true</br>
mySet.has(Math.sqrt(25));  // true</br>
mySet.has('Some Text'.toLowerCase()); // true</br>
mySet.has(o); // true</br>

mySet.size; // 5</br>

mySet.delete(5); // removes 5 from the set</br>
mySet.has(5);    // false, 5 has been removed</br>